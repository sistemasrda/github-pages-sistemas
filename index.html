<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inventario de Equipos TI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        .content {
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        label {
            margin-bottom: 5px;
            font-weight: bold;
        }

        input {
            padding: 8px;
            width: 100%;
            box-sizing: border-box;
        }

        button {
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            cursor: pointer;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th, td {
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #4CAF50;
            color: white;
        }

        .search-box {
            margin-bottom: 20px;
            text-align: center;
        }

        .search-box input {
            padding: 10px;
            width: 300px;
            font-size: 16px;
        }

        .search-box button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }

        .baja-btn {
            background-color: red;
            color: white;
        }

        .alta-btn {
            background-color: green;
            color: white;
        }

        .edit-btn {
            background-color: #ffc107;
        }

        .delete-btn {
            background-color: #dc3545;
            color: white;
        }

        .save-btn {
            background-color: #28a745;
        }

    </style>
</head>
<body>

    <div class="content">
        <h1>Sistema de Inventario de Equipos</h1>

        <!-- Formulario para agregar equipos -->
        <form id="formEquipo">
            <div>
                <label for="usuario">Nombre de Usuario:</label>
                <input type="text" id="usuario" name="usuario" required>
            </div>
            <div>
                <label for="numEmpleado">Número de Empleado:</label>
                <input type="text" id="numEmpleado" name="numEmpleado" required>
            </div>
            <div>
                <label for="puesto">Puesto:</label>
                <input type="text" id="puesto" name="puesto" required>
            </div>
            <div>
                <label for="area">Área:</label>
                <input type="text" id="area" name="area" required>
            </div>
            <div>
                <label for="tipoEquipo">Tipo de Equipo:</label>
                <input type="text" id="tipoEquipo" name="tipoEquipo" required>
            </div>
            <div>
                <label for="modelo">Modelo:</label>
                <input type="text" id="modelo" name="modelo" required>
            </div>
            <div>
                <label for="marca">Marca:</label>
                <input type="text" id="marca" name="marca" required>
            </div>
            <div>
                <label for="numSerie">Número de Serie:</label>
                <input type="text" id="numSerie" name="numSerie" required>
            </div>
            <div>
                <label for="ram">RAM:</label>
                <input type="text" id="ram" name="ram" required>
            </div>
            <div>
                <label for="almacenamiento">Almacenamiento:</label>
                <input type="text" id="almacenamiento" name="almacenamiento" required>
            </div>
            <div>
                <label for="ip">IP:</label>
                <input type="text" id="ip" name="ip" required>
            </div>
            <div>
                <label for="ipWifi">IP WiFi:</label>
                <input type="text" id="ipWifi" name="ipWifi" required>
            </div>
            <div>
                <label for="mac">MAC:</label>
                <input type="text" id="mac" name="mac" required>
            </div>
            <div>
                <label for="idProducto">ID del Producto:</label>
                <input type="text" id="idProducto" name="idProducto" required>
            </div>
            <div>
                <label for="so">Sistema Operativo:</label>
                <input type="text" id="so" name="so" required>
            </div>
            <div>
                <label for="hostname">Hostname:</label>
                <input type="text" id="hostname" name="hostname" required>
            </div>
            <div>
                <label for="usuarioSAP">Usuario SAP:</label>
                <input type="text" id="usuarioSAP" name="usuarioSAP" required>
            </div>
            <div>
                <label for="tipoLicenciaSAP">Tipo de Licencia SAP:</label>
                <input type="text" id="tipoLicenciaSAP" name="tipoLicenciaSAP" required>
            </div>
            <div>
                <label for="clickView">ClickView:</label>
                <input type="text" id="clickView" name="clickView" required>
            </div>
            <div>
                <label for="kitTecladoMouse">Kit Teclado y Mouse:</label>
                <input type="text" id="kitTecladoMouse" name="kitTecladoMouse" required>
            </div>
            <div>
                <label for="monitor">Monitor:</label>
                <input type="text" id="monitor" name="monitor" required>
            </div>
            <div>
                <label for="baseLaptop">Base para Laptop:</label>
                <input type="text" id="baseLaptop" name="baseLaptop" required>
            </div>
            <div>
                <label for="modeloTelefono">Modelo de Teléfono:</label>
                <input type="text" id="modeloTelefono" name="modeloTelefono" required>
            </div>
            <div>
                <label for="macTelefono">MAC Teléfono:</label>
                <input type="text" id="macTelefono" name="macTelefono" required>
            </div>
            <div>
                <label for="extension">Extensión:</label>
                <input type="text" id="extension" name="extension" required>
            </div>
            <div>
                <label for="marcaCelular">Marca de Celular:</label>
                <input type="text" id="marcaCelular" name="marcaCelular" required>
            </div>
            <div>
                <label for="modeloCelular">Modelo de Celular:</label>
                <input type="text" id="modeloCelular" name="modeloCelular" required>
            </div>
            <div>
                <label for="ipCelular">IP Celular:</label>
                <input type="text" id="ipCelular" name="ipCelular" required>
            </div>
            <div>
                <label for="macCelular">MAC Celular:</label>
                <input type="text" id="macCelular" name="macCelular" required>
            </div>
            <div>
                <label for="otros">Otros:</label>
                <input type="text" id="otros" name="otros" required>
            </div>

            <button type="button" onclick="agregarEquipo()">Guardar</button>
        </form>

        <!-- Búsqueda por nombre de usuario -->
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Buscar por nombre de usuario">
            <button onclick="buscar()">Buscar</button>
        </div>

        <!-- Tabla de Inventario -->
        <table id="tablaInventario">
            <thead>
                <tr>
                    <th>Nombre de Usuario</th>
                    <th>Número de Empleado</th>
                    <th>Puesto</th>
                    <th>Área</th>
                    <th>Tipo de Equipo</th>
                    <th>Modelo</th>
                    <th>Marca</th>
                    <th>Número de Serie</th>
                    <th>RAM</th>
                    <th>Almacenamiento</th>
                    <th>IP</th>
                    <th>IP WiFi</th>
                    <th>MAC</th>
                    <th>ID Producto</th>
                    <th>S.O</th>
                    <th>Hostname</th>
                    <th>Usuario SAP</th>
                    <th>Tipo Licencia SAP</th>
                    <th>ClickView</th>
                    <th>Kit Teclado y Mouse</th>
                    <th>Monitor</th>
                    <th>Base para Laptop</th>
                    <th>Modelo Teléfono</th>
                    <th>MAC Teléfono</th>
                    <th>Extensión</th>
                    <th>Marca Celular</th>
                    <th>Modelo Celular</th>
                    <th>IP Celular</th>
                    <th>MAC Celular</th>
                    <th>Otros</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Filas dinámicamente agregadas aquí -->
            </tbody>
        </table>
    </div>

    <!-- Librería jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <script>
        const form = document.getElementById('formEquipo');
        const tablaInventario = document.getElementById('tablaInventario').getElementsByTagName('tbody')[0];
        let filaEditando = null;

        // Función para agregar un equipo
        function agregarEquipo() {
            const formValues = Array.from(new FormData(form).entries()).map(entry => entry[1]);

            if (filaEditando) {
                // Actualizar fila en modo edición
                formValues.forEach((value, index) => {
                    filaEditando.cells[index].textContent = value;
                });
                filaEditando = null;
            } else {
                // Agregar nueva fila
                const fila = tablaInventario.insertRow();
                formValues.forEach(value => {
                    const cell = fila.insertCell();
                    cell.textContent = value;
                });
                const accionesCell = fila.insertCell();
                accionesCell.innerHTML = '<button class="edit-btn" onclick="editarEquipo(this)">Editar</button> <button class="baja-btn" onclick="bajaEquipo(this)">Dar de baja</button> <button class="alta-btn" onclick="altaEquipo(this)">Reactivar</button> <button class="delete-btn" onclick="eliminarEquipo(this)">Eliminar</button>';
            }
            form.reset();
        }

        // Función para buscar por nombre de usuario
        function buscar() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const filas = tablaInventario.getElementsByTagName('tr');
            Array.from(filas).forEach(fila => {
                const texto = fila.getElementsByTagName('td')[0]?.textContent.toLowerCase() || '';
                fila.style.display = texto.includes(searchInput) ? '' : 'none';
            });
        }

        // Función para editar equipo
        function editarEquipo(boton) {
            filaEditando = boton.closest('tr');
            const celdas = filaEditando.getElementsByTagName('td');
            const formInputs = form.getElementsByTagName('input');
            Array.from(formInputs).forEach((input, index) => {
                input.value = celdas[index].textContent;
            });
        }

        // Función para eliminar equipo
        function eliminarEquipo(boton) {
            const fila = boton.closest('tr');
            tablaInventario.deleteRow(fila.rowIndex - 1);
        }

        // Función para dar de baja un equipo
        function bajaEquipo(boton) {
            const fila = boton.closest('tr');
            fila.style.backgroundColor = 'red';
        }

        // Función para reactivar un equipo
        function altaEquipo(boton) {
            const fila = boton.closest('tr');
            fila.style.backgroundColor = 'green';
        }

        // Función para generar PDF usando jsPDF
        function generarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text("Inventario de Equipos", 10, 10);
            let y = 20;
            Array.from(tablaInventario.getElementsByTagName('tr')).forEach(fila => {
                const filaText = Array.from(fila.getElementsByTagName('td')).map(cell => cell.textContent).join(' | ');
                doc.text(filaText, 10, y);
                y += 10;
                if (y > 280) {
                    doc.addPage();
                    y = 10;
                }
            });
            doc.save('inventario_equipos.pdf');
        }
    </script>

</body>
</html>
